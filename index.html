<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>VueBmiPractice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        body {
            align-content: center;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: #888888;
        }
        .ct2 {
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            height: 200px;
            width: 200px;
            cursor: pointer;
        }
    </style>
</head>
<body>

<div class="container mt-5 d-flex justify-content-center align-items-center">
    <div id="app">

        <p >Move the mouse pointer over the box below and click to select height and weight:</p>
        <div>
            <span>Current - Height ↕ : {{ yPos }} cm </span>
            <span>Current - Weight ↔ : {{ xPos }} kg </span><br>
        </div>
        <div class="ct2 mt-3 d-flex justify-content-center align-items-center mx-auto"
             v-on:mousemove="mousePos"
             v-on:click="captureData"
             v-bind:style="{backgroundColor:'hsl('+xPos+',80%,80%)'}"
             style="height: 200px;width: 200px;">
        </div>
        <div v-if="clickedHeight && clickedWeight" class="mt-3">
            <p>Selected - Height: {{ clickedHeight }} cm</p>
            <p>Selected - Weight: {{ clickedWeight }} kg</p>
        </div>

        <!-- New range sliders for height and weight -->
        <div class="mt-3">
            <div class="mb-3">
                <input v-model="name" type="text" class="form-control" placeholder="Enter your name">
                <button @click="generateName" class="btn btn-secondary mt-3">Generate Name</button>
            </div>
            <label for="heightSlider" class="form-label">Height: {{ sliderHeight }} cm</label>
            <input type="range" class="form-range" id="heightSlider" v-model="sliderHeight" min="120" max="250">

            <label for="weightSlider" class="form-label">Weight: {{ sliderWeight }} kg</label>
            <input type="range" class="form-range" id="weightSlider" v-model="sliderWeight" min="30" max="200">

            <p>
                <strong>BMI: {{calculateBMI2}}</strong>
            </p>

        </div>

        <button @click="calculateBMI" class="btn btn-primary mt-3" :disabled="!name">Calculate BMI</button>
        <div v-if="bmi" class="mt-3">
            <h3>BMI Result for {{ name }}</h3>
            <p>Your BMI: {{ bmi.toFixed(2) }}</p>
            <p>Category: {{ bmiCategory }}</p>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>

<script>
    const app = Vue.createApp({
        data() {
            return {
                xPos: 0,
                yPos: 0,
                maxYPos: 200,
                bmi: null,
                bmiCategory: '',
                clickedHeight: null,
                clickedWeight: null,
                name: '',
                names: [
                    "Emma", "Liam", "Olivia", "Noah", "Ava", "Ethan", "Sophia", "Mason",
                    "Isabella", "William", "Mia", "James", "Charlotte", "Benjamin", "Amelia",
                    "Lucas", "Harper", "Henry", "Evelyn", "Alexander", "Abigail", "Michael",
                    "Emily", "Daniel", "Elizabeth", "Jacob", "Sofia", "Logan", "Avery", "Jackson"
                ],
                sliderHeight: 170,
                sliderWeight: 70
            }
        },
        computed: {
            calculateBMI2() {
                const heightInMeters = this.sliderHeight / 100;
                const bmi = this.sliderWeight / (heightInMeters * heightInMeters);
                return bmi.toFixed(1);
            }
        },
        methods: {
            mousePos(event) {
                const rect = event.target.getBoundingClientRect();
                const height = rect.height;
                const width = rect.width;

                this.xPos = Math.round((event.offsetX / width) * 150) + 50; // Weight range: 30-180 kg
                const invertedPercentage = (1 - (event.offsetY / height)) * 100;
                this.yPos = Math.round((invertedPercentage / 100) * 120) + 130; // Height range: 130-250 cm
            },
            captureData(event) {
                this.clickedHeight = this.yPos;
                this.clickedWeight = this.xPos;
                this.sliderHeight = this.clickedHeight;
                this.sliderWeight = this.clickedWeight;
            },
            calculateBMI() {
                const heightInMeters = this.sliderHeight / 100;
                this.bmi = this.sliderWeight / (heightInMeters * heightInMeters);
                this.setBMICategory();
            },
            setBMICategory() {
                if (this.bmi < 18.5) {
                    this.bmiCategory = 'Underweight';
                } else if (this.bmi < 25) {
                    this.bmiCategory = 'Normal weight';
                } else if (this.bmi < 30) {
                    this.bmiCategory = 'Overweight';
                } else {
                    this.bmiCategory = 'Obese';
                }
            },
            generateName() {
                if (this.names.length > 0) {
                    const randomIndex = Math.floor(Math.random() * this.names.length);
                    this.name = this.names[randomIndex];
                    this.names.splice(randomIndex, 1);
                } else {
                    alert("All names have been used!");
                }
            },

        }
    })
    app.mount('#app')
</script>

</body>
</html>